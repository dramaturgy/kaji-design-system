<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="initial-scale=1, shrink-to-fit=no, width=device-width" name="viewport">
    <!-- CSS -->
    <link rel="stylesheet" href="../css/kaji-material.css">
    <link rel="stylesheet" href="../css/product-cms.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://use.fontawesome.com/ebb6ee31d7.js"></script>
    <!-- Add Material CSS, replace Bootstrap CSS -->
  </head>
  <body>
    <nav class="navbar navbar-expand-lg fixed-top navbar-light bg-white faux-border-bottom">
      <a class="navbar-brand" href="#">Edukaji</a>

      <ul class="navbar-nav ml-md-auto">
        <li class="nav-item">
          <a class="nav-link py-1 px-2 dropdown-toggle"
            data-toggle="dropdown"
            id="js_cms_navbar_user_dropdown"
            href="javascript:void(0);"><span
              class="d-inline-block align-bottom lh-4">My Name</span><span
                class="d-inline-block align-bottom ml-1" data-feather="chevron-down"></span></a>
          <div class="dropdown-menu">
            <a class="dropdown-item" href="#">Action 1</a>
            <a class="dropdown-item" href="#">Action 2</a>
            <a class="dropdown-item" href="#">Settings</a>
            <a class="dropdown-item" href="#">Logout</a>
          </div>
        </li>
        <li class="nav-item">
          <a class="nav-link p-0 mx-2"
            style="border-radius: 50%; overflow: hidden; opacity: 1;" 
            href="javascript:void(0);"><img height="32" src="../copy/sample/avatar/admin.png" alt=""></a>
        </li>
      </ul>
    </nav>
    <div class="container-fluid px-0">
      <div class="row no-gutters">
        <nav class="cms-sidenav col-3 col-md-2 d-none d-md-block bg-white">
          <div class="cms-sidenav-sticky has-navbar-fixed">
            <ul class="nav flex-column">
              <li class="nav-item" id="js_sidenav_parent_item_school" data-children=".js-sidenav-child-item-school">
                <div class="js-sidenav-child-item-school">
                  <a class="nav-link d-flex justify-content-between py-3" data-toggle="collapse" data-parent="#js_sidenav_parent_item_school" href="#js_sidenav_accordion_item_school">
                    <div>
                      <span class="d-inline-block align-bottom" data-feather="home"></span><span class="d-inline-block lh-lg align-bottom ml-3">School</span>
                    </div>
                    <span data-feather="plus-circle" style="width: 16px;"></span>
                  </a>
                  <ul class="nav flex-column collapse" id="js_sidenav_accordion_item_school" role="tabpanel">
                    <li class="nav-item">
                      <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="check"></span><span class="d-inline-block lh-lg align-bottom ml-3">School X1</span></a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="arrow-up-right"></span><span class="d-inline-block lh-lg align-bottom ml-3">School X2</span></a>
                    </li>
                    <li class="nav-item">
                      <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="arrow-up-right"></span><span class="d-inline-block lh-lg align-bottom ml-3">School X3</span></a>
                    </li>
                  </ul>
                </div>
              </li>
              <li class="nav-item faux-border-top">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="layout"></span><span class="d-inline-block lh-lg align-bottom ml-3">Dashboard</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link py-3 active" href="#"><span class="d-inline-block align-bottom" data-feather="align-justify"></span><span class="d-inline-block lh-lg align-bottom ml-3">Tuition Fee</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="monitor"></span><span class="d-inline-block lh-lg align-bottom ml-3">Entry Fee</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="users"></span><span class="d-inline-block lh-lg align-bottom ml-3">Students</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="award"></span><span class="d-inline-block lh-lg align-bottom ml-3">Scores</span></a>
              </li>
              <li class="nav-item">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="book-open"></span><span class="d-inline-block lh-lg align-bottom ml-3">Programmes</span></a>
              </li>
              <li class="nav-item faux-border-top">
                <a class="nav-link py-3" href="#"><span class="d-inline-block align-bottom" data-feather="send"></span><span class="d-inline-block lh-lg align-bottom ml-3">Posting</span></a>
              </li>
            </ul>
          </div>
        </nav>
        <main role="main" class="dashboard-main col-12 col-md-10 bg-light-2 py-3" style="min-height: 100vh">
          <div class="container-fluid has-navbar-fixed">
            

            <section class="row py-3 filter-bar-tuition">
              <div class="col-12">
                <p class="subheading-black d-block">FILTER</p>
                <div class="button-toolbar py-2">
                  <div class="btn-group">
                    <button class="btn btn-white btn-fw-regular" type="button" style="text-transform: capitalize;">Status</button>
                    <button class="btn btn-white text-primary dropdown-toggle border-light" type="button" id="js_dropdown_filter_tuition_status" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span>All</span><span class="fa fa-caret-down ml-2"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                      <button class="dropdown-item" type="button">All</button>
                      <button class="dropdown-item" type="button">Paid</button>
                      <button class="dropdown-item" type="button">Unpaid</button>
                    </div>
                  </div>
                  <div class="btn-group">
                    <button class="btn btn-white btn-fw-regular" type="button" style="text-transform: capitalize;">Grade</button>
                    <button class="btn btn-white text-primary dropdown-toggle border-light" type="button" id="js_dropdown_filter_tuition_grade" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span>All</span><span class="fa fa-caret-down ml-2"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                      <button class="dropdown-item" type="button">All</button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item" type="button">9</button>
                      <button class="dropdown-item" type="button">8</button>
                      <button class="dropdown-item" type="button">7</button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item" type="button">6</button>
                      <button class="dropdown-item" type="button">5</button>
                      <button class="dropdown-item" type="button">4</button>
                    </div>
                  </div>
                  <div class="btn-group">
                    <button class="btn btn-white btn-fw-regular" type="button" style="text-transform: capitalize;">Class</button>
                    <button class="btn btn-white text-primary dropdown-toggle border-light" type="button" id="js_dropdown_filter_tuition_class" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span>All</span><span class="fa fa-caret-down ml-2"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                      <button class="dropdown-item" type="button">All</button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item" type="button">A</button>
                      <button class="dropdown-item" type="button">B</button>
                      <button class="dropdown-item" type="button">C</button>
                      <button class="dropdown-item" type="button">D</button>
                    </div>
                  </div>
                  <div class="btn-group">
                    <button class="btn btn-white btn-fw-regular" type="button" style="text-transform: capitalize;">Since</button>
                    <button class="btn btn-white text-primary dropdown-toggle border-light" type="button" id="js_dropdown_filter_tuition_month_start" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span>Now</span><span class="fa fa-caret-down ml-2"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                      <button class="dropdown-item" type="button">Now</button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item" type="button">Jan</button>
                      <button class="dropdown-item" type="button">Feb</button>
                      <button class="dropdown-item" type="button">Mar</button>
                      <button class="dropdown-item" type="button">Apr</button>
                      <button class="dropdown-item" type="button">Jun</button>
                      <button class="dropdown-item" type="button">Jul</button>
                      <button class="dropdown-item" type="button">Aug</button>
                      <button class="dropdown-item" type="button">Sep</button>
                      <button class="dropdown-item" type="button">Oct</button>
                      <button class="dropdown-item" type="button">Nov</button>
                      <button class="dropdown-item" type="button">Dec</button>
                    </div>
                    <button class="btn btn-white btn-fw-regular border-light" type="button" style="text-transform: lowercase;">to</button>
                    <button class="btn btn-white text-primary dropdown-toggle border-light" type="button" id="js_dropdown_filter_tuition_month_end" data-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                      <span>Now</span><span class="fa fa-caret-down ml-2"></span>
                    </button>
                    <div class="dropdown-menu dropdown-menu-right">
                      <button class="dropdown-item" type="button">Now</button>
                      <div class="dropdown-divider"></div>
                      <button class="dropdown-item" type="button">Jan</button>
                      <button class="dropdown-item" type="button">Feb</button>
                      <button class="dropdown-item" type="button">Mar</button>
                      <button class="dropdown-item" type="button">Apr</button>
                      <button class="dropdown-item" type="button">Jun</button>
                      <button class="dropdown-item" type="button">Jul</button>
                      <button class="dropdown-item" type="button">Aug</button>
                      <button class="dropdown-item" type="button">Sep</button>
                      <button class="dropdown-item" type="button">Oct</button>
                      <button class="dropdown-item" type="button">Nov</button>
                      <button class="dropdown-item" type="button">Dec</button>
                    </div>
                  </div>
                  <button class="btn btn-primary" type="submit">FILTER</button>
                </div>
              </div>
            </section>
            <section class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body pt-0 pb-3">
                    <div class="kaji-table-wrapper">
                      <div class="kaji-table-scroller">
                        <table class="table kaji-table" id="js_cms_tuition_table">
                          <thead>
                            <tr>
                              <th class="col-w-s" scope="col">#</th>
                              <th class="col-w-m" scope="col">Name</th>
                              <th class="col-w-m" scope="col">Jul</th>
                              <th class="col-w-m" scope="col">Aug</th>
                              <th class="col-w-m" scope="col">Sep</th>
                              <th class="col-w-m" scope="col">Oct</th>
                              <th class="col-w-m" scope="col">Nov</th>
                              <th class="col-w-m" scope="col">Dec</th>
                            </tr>
                          </thead>
                          <tbody></tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <script id="js_tuition_cell_id_template" type="text/x-lodash-template">
              <td><@= rowIndex @></td>
            </script>

            <script id="js_tuition_cell_name_template" type="text/x-lodash-template">
              <td class="d-block col-w-m overflow-ellipsis">
                <a class="text-dark d-block js-cms-tuition-col-name"
                  href="#js_cms_tuition_student_collapse_content_<@= rowIndex @>"
                  data-row-index="<@= rowIndex @>"
                  data-record-name="<@= record.name @>"
                  data-record-phone="<@= record.phone @>"
                  data-record-email="<@= record.email @>"
                ><span class="fa fa-cog mr-2"></span><span class="js-cms-tuition-table-cell-name"><@= record.name @></span></a>
              </td>
            </script>

            <script id="js_tuition_cell_payments_template" type="text/x-lodash-template">
              <@ for( var d = 0; d < record.payments.length; d ++ ) { @>
              <td>
                <div class="dropdown">
                  <a class="js-cms-tuition-table-col text-dark"
                    href="javascript:void(0);"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    data-html="true"
                    title="<div>Paid at <@= record.payments[d].month @><br/>For <@= record.payments[d].periodStart @> - <@= record.payments[d].periodEnd @></div>"
                  ><@= record.payments[d].paid @></a>
                </div>
              </td>
              <@ } @>
            </script>

            <script id="js_tuition_row_action_template" type="text/x-lodash-template">
              <tr class="js-tuition-row-action">
                <td class="p-0 border-top-0" colspan="9" style="height: auto;">
                  <div class="collapse" id="js_cms_tuition_student_collapse_content_<@= index @>">
                    <div class="card text-black bg-light rounded-0 no-elevation">
                      <div class="card-body py-0">
                        <ul class="nav nav-tabs">
                          <li class="nav-item">
                            <a class="nav-link active" href="#js_cms_tuition_student_tab_pane_email_<@= index @>" data-toggle="tab">Email</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_sms_<@= index @>" data-toggle="tab">SMS</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_edit_<@= index @>" data-toggle="tab">Edit</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_delete_<@= index @>" data-toggle="tab">Delete</a>
                          </li>
                        </ul>
                        <div class="tab-content">
                          <div class="tab-pane py-3 active" id="js_cms_tuition_student_tab_pane_email_<@= index @>" role="tabpanel">
                            <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">Email Form</h4>
                                <form>
                                  <div class="form-group">
                                    <label for="tuition_email_address_field_<@= index @>">Email address</label>
                                    <input type="email" class="form-control" id="tuition_email_address_field_<@= index @>" value="<@= email @>">
                                  </div>
                                  <div class="form-group">
                                    <label for="tuition_email_message_field_<@= index @>">Message</label>
                                    <textarea class="form-control" id="tuition_email_message_field_<@= index @>" rows="3"></textarea>
                                  </div>
                                  <btn href="javascript:void(0);" class="btn btn-primary">SEND</btn>
                                </form>                                
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_sms_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">SMS Form</h4>
                                <form>
                                  <fieldset class="form-group">
                                    <label for="tuition_phone_field_<@= index @>">Phone Number</label>
                                    <input type="email" class="form-control" id="tuition_phone_field_<@= index @>" value="<@= phone @>">
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_sms_message_field_<@= index @>">Message</label>
                                    <textarea class="form-control" id="tuition_sms_message_field_<@= index @>" rows="3"></textarea>
                                  </fieldset>
                                  <btn href="javascript:void(0);" class="btn btn-primary">SEND</btn>
                                </form>
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_edit_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">Edit Form</h4>
                                <form>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_amount_field_<@= index @>">Amount</label>
                                    <div class="input-group"> 
                                        
                                        <input type="number"
                                          value
                                          min="0"
                                          step="1"
                                          data-number-to-fixed="2"
                                          data-number-stepfactor="1"
                                          class="form-control"
                                          id="tuition_payment_amount_field_<@= index @>"
                                          placeholder="0"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_paid_at_field_<@= index @>">Paid at</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_paid_at_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_period_start_field_<@= index @>">Start period</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_period_start_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_period_end_field_<@= index @>">End period</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_period_end_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <btn href="javascript:void(0);" class="btn btn-success">SUBMIT</btn>
                                </form>
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_delete_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-body text-center">
                                <p class="text-black">Are you sure you want to delete tuition data for <strong class="text-danger"><@= name @></strong> ?</p>
                                <a href="#" class="btn btn-danger">DELETE</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </script>
          </div>
        </main>
      </div>
    </div>
    <div id="js_cms_tuition_template_contents" class="d-none">
      <div class="js-cms-tuition-name-popover-content">
        <div class="p-2 border rounded">
          <a href="javascript:void(0);" class="btn btn-light text-left"><span class="fa fa-envelope mr-2 text-primary"></span>Email</a>
          <a href="javascript:void(0);" class="btn btn-light text-left"><span class="fa fa-comment mr-2 text-primary"></span>SMS</a>
          <a href="javascript:void(0);" class="btn btn-light text-left"><span class="fa fa-pencil mr-2 text-primary"></span>Edit</a>
          <a href="javascript:void(0);" class="btn btn-light text-left"><span class="fa fa-trash mr-2 text-danger"></span>Delete</a>
        </div>
      </div>
    </div>

    <script src="../copy/vendor/jquery.min.js"></script>
    <script src="../copy/vendor/popper.min.js"></script>
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script src="../copy/vendor/bootstrap.min.js"></script>
    <script src="../copy/vendor/material.min.js"></script>
    <script src="../copy/vendor/lodash.min.js"></script>
    <script src="../copy/vendor/jquery.dynatable.js"></script>

    
    <script>
      feather.replace();
    </script>

    
    <script src="../copy/vendor/babel.min.js"></script>

    
    <script src="../copy/vendor/faker.min.js"></script>

    
    <script type="text/babel">
      faker.locale = "en_IND";
      const generateFakeTuition = () => {
        return [
          'Albert Camus',
          'Franz Kafka',
          'George Orwell',
          'Jean-Paul Sartre',
          'Paulo Coelho'
        ].map((studentName, i) => ({
          'name': studentName,
          'email': (studentName.split(' ').join('.') + '@mail.com').toLowerCase(),
          'phone': faker.phone.phoneNumber(),
          'payments': (() => {
                      return [
                        'Jul 2017',
                        'Aug 2017',
                        'Sep 2017',
                        'Oct 2017',
                        'Nov 2017',
                        'Dec 2017'
                      ].map((month, i) => ({
                        'month': month,
                        'paid': `Rp ${faker.random.number( { min: 5, max: 9 } ) * 100}.000`,
                        'periodStart': `${faker.random.arrayElement(['Jul', 'Aug', 'Sep'])} 2017`,
                        'periodEnd': `${faker.random.arrayElement(['Jul', 'Aug', 'Sep'])} 2017`
                      }))
                    })()
        }));
      };

      const fakeTuition = generateFakeTuition();
    </script>

    
    <script>
      $(function () {
        
        _.templateSettings = {
            interpolate: /\<\@\=(.+?)\@\>/g,
            evaluate: /\<\@(.+?)\@\>/g
        };

        var $tuitionTable = $('#js_cms_tuition_table');

        function appendRowAction(elRow) {
          var $elTrigger = elRow.find('.js-cms-tuition-col-name')
          var templateFn = _.template($('#js_tuition_row_action_template').html());
          var templateHTML = templateFn({
            index: $elTrigger.attr('data-row-index'),
            name: $elTrigger.attr('data-record-name'),
            email: $elTrigger.attr('data-record-email'),
            phone: $elTrigger.attr('data-record-phone')
          });

          elRow.after(templateHTML);
          $elTrigger
            .attr('data-toggle', 'collapse')
            .collapse();
        }

        $tuitionTable.bind('dynatable:afterUpdate', function(e, dynatable) {
          var $table = $(this);
          $table.find('tbody').find('tr').each(function(i) {
            var $row = $(this)
            ,   $elTrigger = $row.find('.js-cms-tuition-col-name')
            ,   $elCell = $elTrigger.closest('td');
            
            $elTrigger.on('click', function(e) {
              $elCell.toggleClass('bg-light');
            });

            appendRowAction($row);
          });
        });

        function generateTuitionRow(rowIndex, record, columns, cellWriter) {

          function generateCell( templateIn, rowIndex, record ) {
            var templateFn = _.template(templateIn.html());
            var templateOut = templateFn({rowIndex: rowIndex, record: record});
            return templateOut;
          }

          return '<tr>' +
            generateCell( $('#js_tuition_cell_id_template'), rowIndex, record ) +
            generateCell( $('#js_tuition_cell_name_template'), rowIndex, record ) +
            generateCell( $('#js_tuition_cell_payments_template'), rowIndex, record ) +
            '</tr>';
        }

        $tuitionTable.dynatable({
          features: {
            paginate: false,
            sort: false,
            pushState: false,
            search: false,
            recordCount: false,
            perPageSelect: false
          },
          dataset: {
            records: fakeTuition
          },
          writers: {
            _rowWriter: generateTuitionRow
          }
        });

        $('[data-toggle="tooltip"]').tooltip();

      });
    </script>
  </body>
</html>