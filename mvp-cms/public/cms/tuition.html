<!DOCTYPE html>
<html lang="en">
  <head>
    <!-- Required meta tags -->
    <meta charset="utf-8">
    <meta content="initial-scale=1, shrink-to-fit=no, width=device-width" name="viewport">
    <!-- CSS -->
    <link rel="stylesheet" href="../css/kaji-material.css">
    <link rel="stylesheet" href="../css/product-cms.css">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="https://use.fontawesome.com/ebb6ee31d7.js"></script>
    <!-- Add Material CSS, replace Bootstrap CSS -->
  </head>
  <body>
    <nav class="cms-navbar navbar navbar-expand-lg fixed-top navbar-light bg-white faux-border-bottom p-0">
      <div class="container-fluid px-0">
        <div class="row no-gutters">
          <div class="cms-navbar-toggle">
            <a class="cms-navbar-toggle-btn align-items-center justify-content-center" id="js_cms_navbar_toggle_btn" href="javascript:void(0);"><span class="js-cms-navbar-toggle-icon" data-feather="menu"></span><span class="js-cms-navbar-toggle-icon d-none" data-feather="x"></span></a>
          </div>
          <div class="col-4 col-sm-2">
            <a class="cms-navbar-brand navbar-brand w-100" href="#"><span class="cms-navbar-brand-text d-block w-100 text-primary">Edukaji</span></a>
          </div>

          <div class="col-sm-3 px-3 d-none d-sm-block border-left">
            <div class="h-100 d-flex flex-row">
              <span class="align-center h-100 text-primary mr-2" data-feather="home"></span>
                <a class="h5 m-0 p-0 text-bold text-dark h-100 lh-5" href="javascript:void(0);"
                  title="The Very Long School Name at some place"
                  data-toggle="modal"
                  data-target="#js_cms_school_list_modal"
                  style="
                    max-width: 100%;
                    overflow: hidden;
                    text-overflow: ellipsis;
                    white-space: nowrap;">
                  <h6 class="d-inline-block m-0 font-weight-normal">The Very Very Long School Name at some place</h6>
                </a>
                <span class="fa fa-caret-down ml-auto px-2 align-self-center text-primary"></span>
            </div>
            <div class="navbar-ornament-a"
              style="
                position: absolute;
                display: block;
                bottom: -0.75rem;
                left: 1rem;
                right: 1rem;
                background-color: rgba(147, 78, 197, 1);
                height: 1px;"></div>
          </div>
          
          <ul class="navbar-nav ml-md-auto border-left px-sm-3 ml-auto">
            <li class="nav-item px-3 px-sm-0">
              <a class="nav-link py-1 px-2 dropdown-toggle"
                data-toggle="dropdown"
                id="js_cms_navbar_user_dropdown"
                href="javascript:void(0);"><span
                  class="d-inline-block align-bottom lh-4">My Name</span><span
                    class="d-inline-block align-bottom ml-1" data-feather="chevron-down"></span></a>
              <div class="dropdown-menu">
                <a class="dropdown-item" href="#">Action 1</a>
                <a class="dropdown-item" href="#">Action 2</a>
                <a class="dropdown-item" href="#">Settings</a>
                <a class="dropdown-item" href="#">Logout</a>
              </div>
            </li>
            <li class="nav-item d-sm-block d-none">
              <a class="nav-link p-0 mx-2"
                style="border-radius: 50%; overflow: hidden; opacity: 1;" 
                href="javascript:void(0);"><img height="32" src="../copy/sample/avatar/admin.png" alt=""></a>
            </li>
          </ul>
        </div>
      </div>
    </nav>
    <div class="container-fluid px-0">
      <div class="row no-gutters">
        
        <nav class="cms-sidenav col-10 col-md-3 col-lg-2 bg-white" id="js_cms_sidenav">
          <div class="cms-sidenav-sticky has-navbar-fixed">
            <ul class="nav flex-column">
              <li class="nav-item ">
                <a class="nav-link py-3 " href="/cms">
                  <span class="d-inline-block align-bottom" data-feather="layout"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Dashboard</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link py-3  active" href="/cms/tuition.html">
                  <span class="d-inline-block align-bottom" data-feather="align-justify"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Tuition Payment</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link py-3 " href="javascript:void(0);">
                  <span class="d-inline-block align-bottom" data-feather="monitor"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Entry Payment</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link py-3 " href="javascript:void(0);">
                  <span class="d-inline-block align-bottom" data-feather="users"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Student</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link py-3 " href="javascript:void(0);">
                  <span class="d-inline-block align-bottom" data-feather="award"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Scores</span></a>
              </li>
              <li class="nav-item ">
                <a class="nav-link py-3 " href="javascript:void(0);">
                  <span class="d-inline-block align-bottom" data-feather="book-open"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Programmes</span></a>
              </li>
              <li class="nav-item faux-border-top">
                <a class="nav-link py-3 " href="javascript:void(0);">
                  <span class="d-inline-block align-bottom" data-feather="send"></span>
                  <span class="d-inline-block lh-lg align-bottom ml-3">Posting</span></a>
              </li>
            </ul>
          </div>
        </nav>
        <main role="main" class="dashboard-main col-12 col-md-9 col-lg-10 bg-light-2 py-3" id="js_dashboard_main" style="min-height: 100vh">
          <div class="container-fluid has-navbar-fixed">
            <section class="row align-items-stretch">
              <div class="col">
                <div class="card border-black-divider-solid mb-3">
                  <div class="card-body px-0 py-2 px-sm-2 py-sm-3">
                    <div class="d-flex align-items-center">
                      <h4 class="align-self-center m-0 px-3 px-sm-4 text-dark">Tuition</h4>
                      <p class="align-self-center m-0 px-4 border-left text-muted lh-3 d-none d-sm-block" style="font-size: 0.75rem;">Lorem ipsum dolor sit amet, consectetur adipisicing elit. <br>Doloremque dignissimos dolor accusamus.</p>
                    </div>
                  </div>
                </div>
              </div>
              <div class="d-none d-sm-flex col-sm-3 pl-0">
                <div class="card border-black-divider-solid w-100 mb-3">
                  <div class="card-body p-3">
                    <div class="form-group">
                      <div class="input-group">
                        <span class="input-group-addon d-none d-sm-flex"><span class="fa fa-calendar"></span></span>
                        <input type="text"
                          class="form-control bg-light px-3 m-0 ml-sm-3"
                          id="js_tuition_period_control"
                          placeholder="Select range" 
                        >
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>
            <section class="row">
              <div class="col-12 col-sm-4">
                <div class="card border-black-divider-solid">
                  <div class="card-body px-3 pt-3 pb-2">
                    <p class="subsubheading-black text-dark">OVERALL PERFORMANCE</p>
                    <div id="js_tuition_chart_overall_wrapper" class="w-100 py-2" style="height: 10.5rem;">
                      <canvas id="js_tuition_chart_overall"></canvas>
                    </div>
                  </div>
                </div>
              </div>
              <div class="col-12 col-sm-8">
                <div class="card border-black-divider-solid mb-3">
                  <div class="card-body px-3 pt-3 pb-0">

                    <p class="subsubheading-black text-dark mb-3">MESSAGES</p>

                    <div class="d-flex flex-nowrap message-triggers-wrapper">


                      <a href="javacript:void(0);" class="card message-trigger no-elevation mb-3 text-dark js-message-trigger" data-message-id="1">
                        <div class="card-body border-black-divider-solid bg-white py-3">
                          <div class="message-head">
                            <div class="message-label js-message-label">
                              <span class="badge badge-primary text-white mb-2">news</span>
                            </div>
                            <p class="message-title js-message-title">Very long title shall get truncated with ellipsis</p>
                          </div>
                          <p class="message-caption">Lorem ipsum dolor sit amet cons, ectetur adipisicing elit.</p>
                          <div class="message-meta">
                            <p class="message-sender text-primary"><span class="fa fa-user-o mr-2 text-muted"></span><span class="js-message-sender">Jean Baudrillard</span></p>
                            <p class="message-timeago text-muted"><span class="fa fa-calendar-o mr-2"></span><span class="js-message-timeago">Now</span></p>
                          </div>
                        </div>
                      </a>
                      <a href="javacript:void(0);" class="card message-trigger no-elevation mb-3 text-dark js-message-trigger" data-message-id="2">
                        <div class="card-body border-black-divider-solid bg-white py-3">
                          <div class="message-head">
                            <div class="message-label js-message-label">
                              <span class="badge badge-secondary text-white mb-2">some long label</span>
                            </div>
                            <p class="message-title js-message-title">This one is shorter</p>
                          </div>
                          <p class="message-caption">Lorem ipsum dolor sit amet cons, ectetur adipisicing elit.</p>
                          <div class="message-meta">
                            <p class="message-sender text-primary"><span class="fa fa-user-o mr-2 text-muted"></span><span class="js-message-sender">Jean Baudrillard</span></p>
                            <p class="message-timeago text-muted"><span class="fa fa-calendar-o mr-2"></span><span class="js-message-timeago">2 days ago</span></p>
                          </div>
                        </div>
                      </a>
                      <a href="javacript:void(0);" class="card message-trigger no-elevation mb-3 text-dark js-message-trigger" data-message-id="3">
                        <div class="card-body border-black-divider-solid bg-white py-3">
                          <div class="message-head">
                            <div class="message-label js-message-label">
                              <span class="badge badge-info text-white mb-2">archived</span>
                            </div>
                            <p class="message-title js-message-title">How about this</p>
                          </div>
                          <p class="message-caption">Lorem ipsum dolor sit amet cons, ectetur adipisicing elit.</p>
                          <div class="message-meta">
                            <p class="message-sender text-primary"><span class="fa fa-user-o mr-2 text-muted"></span><span class="js-message-sender">Jean Baudrillard</span></p>
                            <p class="message-timeago text-muted"><span class="fa fa-calendar-o mr-2"></span><span class="js-message-timeago">Yesterday</span></p>
                          </div>
                        </div>
                      </a>
                      <a href="javacript:void(0);" class="card message-trigger no-elevation mb-3 text-dark js-message-trigger" data-message-id="4">
                        <div class="card-body border-black-divider-solid bg-white py-3">
                          <div class="message-head">
                            <div class="message-label js-message-label">
                              <span class="badge badge-warning text-white mb-2">private</span>
                            </div>
                            <p class="message-title js-message-title">This should overflowing the boundary</p>
                          </div>
                          <p class="message-caption">Lorem ipsum dolor sit amet cons, ectetur adipisicing elit.</p>
                          <div class="message-meta">
                            <p class="message-sender text-primary"><span class="fa fa-user-o mr-2 text-muted"></span><span class="js-message-sender">Jean Baudrillard</span></p>
                            <p class="message-timeago text-muted"><span class="fa fa-calendar-o mr-2"></span><span class="js-message-timeago">Dec 7, 2017</span></p>
                          </div>
                        </div>
                      </a>
                      <a href="javacript:void(0);" class="card message-trigger no-elevation mb-3 text-dark js-message-trigger" data-message-id="5">
                        <div class="card-body border-black-divider-solid bg-white py-3">
                          <div class="message-head">
                            <div class="message-label js-message-label">
                              <span class="badge badge-danger text-white mb-2">some taxonomy</span>
                            </div>
                            <p class="message-title js-message-title">Asking you!</p>
                          </div>
                          <p class="message-caption">Lorem ipsum dolor sit amet cons, ectetur adipisicing elit.</p>
                          <div class="message-meta">
                            <p class="message-sender text-primary"><span class="fa fa-user-o mr-2 text-muted"></span><span class="js-message-sender">Jean Baudrillard</span></p>
                            <p class="message-timeago text-muted"><span class="fa fa-calendar-o mr-2"></span><span class="js-message-timeago">Dec 9, 2018</span></p>
                          </div>
                        </div>
                      </a>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            
            <script id="js_dashboard_message_article_template" type="text/x-lodash-template">
              <article
                class="card border-black-divider-solid message-article js-message-article"
                id="js_message_article_<@= id @>"
              >
                <div class="card-body marticle-card">
                  <div class="marticle-head">
                    <div class="marticle-action-wrapper ml-auto">
                      <a class="marticle-action" href="javacript:void(0);"><span data-feather="star"></span></a>
                      <a class="marticle-action" href="javacript:void(0);"><span data-feather="trash"></span></a>
                      <a class="marticle-action js-marticle-action-close" href="javacript:void(0);"><span data-feather="x"></span></a>
                    </div>
                  </div>
                  <div class="marticle-body">
                    <div class="marticle-body-scroll">
                      <div class="marticle-label js-marticle-label w-100"></div>
                      <p class="marticle-title mb-2"><@= title @></p>
                      <p class="marticle-sender m-0 text-muted text-sm" style="font-size: .75rem; line-height: 1rem;"><span class="fa fa-user-o" style="display: inline-block; width: 1rem;"></span> <span class="js-marticle-sender"></span></p>
                      <p class="marticle-timeago text-muted text-sm" style="font-size: .75rem; line-height: 1rem;"><span class="fa fa-calendar" style="display: inline-block; width: 1rem;"></span> <span class="js-marticle-timeago"></span></p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                      <p>Lorem ipsum dolor sit amet, consectetur adipisicing elit. Eius, culpa. Deleniti sed vitae expedita fugiat, tenetur facere dolorum sit, officiis laboriosam dolore dolores dicta aliquam voluptatum facilis. Earum, nostrum, porro!</p>
                    </div>
                  </div>
                  <div class="marticle-foot">
                    <div class="marticle-action-wrapper w-100" style="justify-content: center;">
                      <a class="marticle-action text-white bg-dark rounded" href="javacript:void(0);"><span data-feather="chevron-right"></span><span class="px-2" style="line-height: 1rem;">Reply</span></a>
                      <a class="marticle-action text-white bg-dark rounded" href="javacript:void(0);"><span data-feather="chevrons-right"></span><span class="px-2" style="line-height: 1rem;">Reply All</span></a>
                    </div>
                  </div>
                </div>
              </article>
            </script>
            <section class="row" id="js_cms_tuition_filter_bar">
              <div class="col-12 col-sm-8 col-lg-6">
                <div class="card my-3" id="js_cms_tuition_filter_bar_container">
                  <div class="card-body p-2">
                    <form id="js_cms_tuition_form" method="POST">
                      <div class="form-row">
                        <div class="form-group col-3 my-0 pr-0">
                          <div class="input-group">
                            <button class="btn btn-block btn-primary font-weight-normal"
                              id="js_cms_tuition_filter_trigger"
                              type="button"
                              style="border-top-right-radius: 0; border-bottom-right-radius: 0;"
                            ><span class="fa fa-filter mr-2 d-none d-sm-inline-block"></span>FILTER</button>
                          </div>
                        </div>
                        <div class="form-group col-9 my-0 pl-0">
                          <div class="input-group">
                            <input type="text" class="form-control bg-light px-2" placeholder="Search for...">
                            <div class="input-group-btn mx-0">
                              <select class="selectpicker" title="All" data-style="btn-primary rounded-0 font-weight-normal">
                                <option>All</option>
                                <option>Name</option>
                                <option>NIS</option>
                                <option>Email</option>
                                <option>Phone</option>
                              </select>
                              <button class="btn btn-primary font-weight-normal mx-0" type="submit" style="border-left: 1px solid rgba(68, 60, 74, 0.24);">SEARCH</button>
                            </div>
                          </div>
                        </div>
                      </div>

                      <div id="js_cms_tuition_filter_hidden_fields" class="d-none">
                        <input type="text" id="js_cms_tuition_filter_status_hidden">
                        <input type="text" id="js_cms_tuition_filter_grade_hidden">
                        <input type="text" id="js_cms_tuition_filter_class_hidden">
                        <input type="text" id="js_cms_tuition_filter_start_period_hidden">
                        <input type="text" id="js_cms_tuition_filter_end_period_hidden">
                      </div>
                    </form>

                    <div class="d-none" id="js_cms_tuition_filter_popover">
                      <div class="card border-light">
                        <div class="card-body p-3">
                          <div class="form-group row no-gutters">
                            <label for="js_cms_tuition_filter_status" class="form-control-label text-dark col-4" style="padding: 0 0.5rem;font-size: 0.875rem;line-height: 2rem;">Status</label>
                            <select class="selectpicker col-8 p-0 no-elevation" id="js_cms_tuition_filter_status" data-style="btn-light" title="Select">
                              <option>All</option>
                              <option data-divider="true"></option>
                              <option>Paid</option>
                              <option>Incomplete</option>
                              <option>Unpaid</option>
                              <option>Discount</option>
                            </select>
                          </div>
                          <div class="form-group row no-gutters">
                            <label for="js_cms_tuition_filter_grade" class="form-control-label text-dark col-4" style="padding: 0 0.5rem;font-size: 0.875rem;line-height: 2rem;">Grade</label>
                            <select class="selectpicker col-8 p-0 no-elevation" id="js_cms_tuition_filter_grade" data-style="btn-light" title="Select">
                              <option>All</option>
                              <option data-divider="true"></option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                            </select>
                          </div>
                          <div class="form-group row no-gutters">
                            <label for="js_cms_tuition_filter_class" class="form-control-label text-dark col-4" style="padding: 0 0.5rem;font-size: 0.875rem;line-height: 2rem;">Class</label>
                            <select class="selectpicker col-8 p-0 no-elevation" id="js_cms_tuition_filter_class" data-style="btn-light" title="Select">
                              <option>All</option>
                              <option data-divider="true"></option>
                              <option>1</option>
                              <option>2</option>
                              <option>3</option>
                              <option>4</option>
                              <option>5</option>
                            </select>
                          </div>
                          <div class="form-group row no-gutters">
                            <label for="js_cms_tuition_filter_start_date" class="form-control-label text-dark col-4" style="padding: 0 0.5rem;font-size: 0.875rem;line-height: 2rem;">Since</label>
                            <input type="text"
                              class="form-control col-8 px-3 bg-light js-filter-datepicker"
                              id="js_cms_tuition_filter_start_period"
                              placeholder="Select month"
                            >
                          </div>
                          <div class="form-group row no-gutters">
                            <label for="js_cms_tuition_filter_end_date" class="form-control-label text-dark col-4" style="padding: 0 0.5rem;font-size: 0.875rem;line-height: 2rem;">Until</label>
                            <input type="text"
                              class="form-control col-8 px-3 bg-light js-filter-datepicker"
                              id="js_cms_tuition_filter_end_period"
                              placeholder="Select month"
                            >
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </div>
              </div>

              
            </section>
            <section class="row">
              <div class="col-12">
                <div class="card">
                  <div class="card-body pt-0 pb-3">
                    <div class="kaji-table-wrapper">
                      <div class="kaji-table-scroller">
                        <table class="table kaji-table" id="js_cms_tuition_table">
                          <thead>
                            <tr>
                              <th class="col-w-s" scope="col">#</th>
                              <th class="col-w-m" scope="col">Name</th>
                              <th class="col-w-m" scope="col">Jul</th>
                              <th class="col-w-m" scope="col">Aug</th>
                              <th class="col-w-m" scope="col">Sep</th>
                              <th class="col-w-m" scope="col">Oct</th>
                              <th class="col-w-m" scope="col">Nov</th>
                              <th class="col-w-m" scope="col">Dec</th>
                            </tr>
                          </thead>
                          <tbody></tbody>
                        </table>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
            </section>

            <script id="js_tuition_cell_id_template" type="text/x-lodash-template">
              <td><@= index @></td>
            </script>

            <script id="js_tuition_cell_name_template" type="text/x-lodash-template">
              <td class="d-block col-w-m overflow-ellipsis">
                <a class="text-dark d-block js-cms-tuition-col-name text-truncate"
                  href="#js_cms_tuition_student_collapse_content_<@= index @>"
                  data-row-index="<@= index @>"
                  data-record-name="<@= record.name @>"
                  data-record-phone="<@= record.phone @>"
                  data-record-email="<@= record.email @>"
                ><span class="fa fa-cog text-muted mr-2"></span><span class="js-cms-tuition-table-cell-name"><@= record.name @></span></a>
              </td>
            </script>

            <script id="js_tuition_cell_payments_template" type="text/x-lodash-template">
              <@ for( var d = 0; d < record.payments.length; d ++ ) { @>
              <td class="tuition-payment-col">
                <div class="tuition-payment dropdown">
                  <a class="js-tuition-payment-text tuition-payment-text"
                    href="javascript:void(0);"
                    data-toggle="tooltip"
                    data-placement="bottom"
                    data-html="true"
                    title="<div>Paid at <@= record.payments[d].month @><br/>For <@= record.payments[d].periodStart @> - <@= record.payments[d].periodEnd @></div>"
                  ><@= record.payments[d].paid @></a>
                </div>
              </td>
              <@ } @>
            </script>

            <script id="js_tuition_row_action_template" type="text/x-lodash-template">
              <tr class="js-tuition-row-action">
                <td class="p-0 border-top-0" colspan="9" style="height: auto;">
                  <div class="collapse" id="js_cms_tuition_student_collapse_content_<@= index @>">
                    <div class="card text-black bg-light rounded-0 no-elevation">
                      <div class="card-body py-0">
                        <ul class="nav nav-tabs">
                          <li class="nav-item">
                            <a class="nav-link active" href="#js_cms_tuition_student_tab_pane_email_<@= index @>" data-toggle="tab">Email</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_sms_<@= index @>" data-toggle="tab">SMS</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_edit_<@= index @>" data-toggle="tab">Edit</a>
                          </li>
                          <li class="nav-item">
                            <a class="nav-link" href="#js_cms_tuition_student_tab_pane_delete_<@= index @>" data-toggle="tab">Delete</a>
                          </li>
                        </ul>
                        <div class="tab-content">
                          <div class="tab-pane py-3 active" id="js_cms_tuition_student_tab_pane_email_<@= index @>" role="tabpanel">
                            <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">Email Form</h4>
                                <form>
                                  <div class="form-group">
                                    <label for="tuition_email_address_field_<@= index @>">Email address</label>
                                    <input type="email" class="form-control" id="tuition_email_address_field_<@= index @>" value="<@= email @>">
                                  </div>
                                  <div class="form-group">
                                    <label for="tuition_email_message_field_<@= index @>">Message</label>
                                    <textarea class="form-control" id="tuition_email_message_field_<@= index @>" rows="3"></textarea>
                                  </div>
                                  <btn href="javascript:void(0);" class="btn btn-primary">SEND</btn>
                                </form>                                
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_sms_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">SMS Form</h4>
                                <form>
                                  <fieldset class="form-group">
                                    <label for="tuition_phone_field_<@= index @>">Phone Number</label>
                                    <input type="email" class="form-control" id="tuition_phone_field_<@= index @>" value="<@= phone @>">
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_sms_message_field_<@= index @>">Message</label>
                                    <textarea class="form-control" id="tuition_sms_message_field_<@= index @>" rows="3"></textarea>
                                  </fieldset>
                                  <btn href="javascript:void(0);" class="btn btn-primary">SEND</btn>
                                </form>
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_edit_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-header"><span class="text-muted"><@= name @></span></div>
                              <div class="card-body">
                                <h4 class="card-title">Edit Form</h4>
                                <form>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_amount_field_<@= index @>">Amount</label>
                                    <div class="input-group"> 
                                        
                                        <input type="number"
                                          value
                                          min="0"
                                          step="1"
                                          data-number-to-fixed="2"
                                          data-number-stepfactor="1"
                                          class="form-control"
                                          id="tuition_payment_amount_field_<@= index @>"
                                          placeholder="0"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_paid_at_field_<@= index @>">Paid at</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_paid_at_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_period_start_field_<@= index @>">Start period</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_period_start_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <fieldset class="form-group">
                                    <label for="tuition_payment_period_end_field_<@= index @>">End period</label>
                                    <div class="input-group"> 
                                        
                                        <input type="date"
                                          class="form-control"
                                          id="tuition_payment_period_end_field_<@= index @>"
                                        />
                                    </div> 
                                  </fieldset>
                                  <btn href="javascript:void(0);" class="btn btn-success">SUBMIT</btn>
                                </form>
                              </div>
                            </div>
                          </div>
                          <div class="tab-pane py-3" id="js_cms_tuition_student_tab_pane_delete_<@= index @>" role="tabpanel">
                           <div class="card" style="width: 40rem;">
                              <div class="card-body text-center">
                                <p class="text-black">Are you sure you want to delete tuition data for <strong class="text-danger"><@= name @></strong> ?</p>
                                <a href="#" class="btn btn-danger">DELETE</a>
                              </div>
                            </div>
                          </div>
                        </div>
                      </div>
                    </div>
                  </div>
                </td>
              </tr>
            </script>
          </div>

          <button
            class="btn btn-float waves-attach waves-circle btn-primary position-fixed"
            type="button"
            data-toggle="modal"
            data-target="#js_tuition_new_row_modal"
            style="right: 2rem; bottom: 2rem;"
          ><span class="fa fa-plus"></span></button>

          <div class="modal fade" id="js_tuition_new_row_modal" tabindex="-1">
            <div class="modal-dialog" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">New Row</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <form id="js_tuition_new">
                    <div class="form-group">
                      <label for="js_tuition_new_grade" class="form-control-label">Grade</label>
                      <select class="selectpicker w-100 mt-2 no-elevation" id="js_tuition_new_grade" data-style="btn-light" title="Select Grade">
                        <option>All</option>
                        <option data-divider="true"></option>
                        <option>1</option>
                        <option>2</option>
                        <option>3</option>
                        <option>4</option>
                        <option>5</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_class" class="form-control-label">Class</label>
                      <select class="selectpicker w-100 mt-2 no-elevation" id="js_tuition_new_class" data-style="btn-light" title="Select Class">
                        <option>All</option>
                        <option data-divider="true"></option>
                        <option>A</option>
                        <option>B</option>
                        <option>C</option>
                        <option>D</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_name">Name</label>
                      <input type="text" class="form-control typeahead w-100" id="js_tuition_new_name" placeholder="Insert Name">
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_paid_for">Paid for</label>
                      <input type="text" class="form-control w-100" id="js_tuition_new_paid_for" placeholder="Select Month">
                      <input type="text" class="d-none" id="js_tuition_new_paid_for_hidden" readonly>
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_paid_at">Paid At</label>
                      <input type="text" class="form-control w-100" id="js_tuition_new_paid_at" placeholder="Select Date">
                      <input type="text" class="d-none" id="js_tuition_new_paid_at_hidden" readonly>
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_bill">Bill</label>
                      <input type="number" class="form-control w-100" id="js_tuition_new_bill" readonly="true">
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_payment">Payment</label>
                      <input type="number" class="form-control w-100" id="js_tuition_new_payment" placeholder="Insert Payment Amount">
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_status" class="form-control-label">Status</label>
                      <select class="selectpicker w-100 mt-2 no-elevation" id="js_tuition_new_status" data-style="btn-light" title="Select Payment Status">
                        <option>Complete</option>
                        <option>Incomplete</option>
                      </select>
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_discount">Discount</label>
                      <input type="number" class="form-control w-100" id="js_tuition_new_discount" placeholder="Insert Discount Amount">
                    </div>
                    <div class="form-group">
                      <label for="js_tuition_new_remark">Remarks</label>
                      <input type="text" class="form-control w-100" id="js_tuition_new_remark" placeholder="Insert Remarks">
                    </div>

                    <button type="submit" class="btn btn-primary">Submit</button>
                  </form>
                </div>
              </div>
            </div>
          </div>

          <div class="modal fade" id="js_cms_school_list_modal" tabindex="-1">
            <div class="modal-dialog modal-sm" role="document">
              <div class="modal-content">
                <div class="modal-header">
                  <h5 class="modal-title" id="exampleModalLabel">Change School</h5>
                  <button type="button" class="close" data-dismiss="modal" aria-label="Close">
                    <span aria-hidden="true">&times;</span>
                  </button>
                </div>
                <div class="modal-body">
                  <div class="list-group list-group-bordered">
                    <a href="javascript:void(0);" class="list-group-item d-flex justify-content-between align-items-center px-3 list-group-item-action active"><span class="text-truncate d-inline-block mr-2">The Very Very Long School Name at some place</span> <span class="badge badge-light badge-pill"><span class="fa fa-check"></span></span></a>
                    <a href="javascript:void(0);" class="list-group-item d-flex justify-content-between align-items-center px-3 list-group-item-action"><span class="text-truncate d-inline-block mr-2">School B</span> <span class="badge badge-light badge-pill"><span class="fa fa-arrow-right"></span></span></a>
                    <a href="javascript:void(0);" class="list-group-item d-flex justify-content-between align-items-center px-3 list-group-item-action"><span class="text-truncate d-inline-block mr-2">School C</span> <span class="badge badge-light badge-pill"><span class="fa fa-arrow-right"></span></span></a>
                    <a href="javascript:void(0);" class="list-group-item d-flex justify-content-between align-items-center px-3 list-group-item-action"><span class="text-truncate d-inline-block mr-2">School D</span> <span class="badge badge-light badge-pill"><span class="fa fa-arrow-right"></span></span></a>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </main>
      </div>
    </div>

    <script src="../copy/vendor/jquery.min.js"></script>
    <script src="../copy/vendor/popper.min.js"></script>
    <script src="https://unpkg.com/feather-icons/dist/feather.min.js"></script>
    <script src="../copy/vendor/bootstrap.min.js"></script>
    <script src="../copy/vendor/material.min.js"></script>
    <script src="../copy/vendor/lodash.min.js"></script>
    <script src="../copy/vendor/jquery.dynatable.js"></script>
    <script src="../copy/vendor/bootstrap-select.min.js"></script>
    <script src="../copy/vendor/datepicker.min.js"></script>
    <script src="../copy/vendor/datepicker.en.js"></script>
    <script src="../copy/vendor/typeahead.jquery.min.js"></script>
    <script src="../copy/vendor/interact.min.js"></script>

    
    <script>
      feather.replace();
    </script>

    
    <script src="../copy/vendor/babel.min.js"></script>

    
    <script src="../copy/vendor/faker.min.js"></script>

    
    <script type="text/babel">
      faker.locale = "en_IND";
      const generateFakeTuition = () => {
        return [
          'Albert Camus',
          'Franz Kafka',
          'George Orwell',
          'Jean-Paul Sartre',
          'Paulo Coelho'
        ].map((studentName, i) => ({
          'name': studentName,
          'email': (studentName.split(' ').join('.') + '@mail.com').toLowerCase(),
          'phone': faker.phone.phoneNumber(),
          'payments': (() => {
                      return [
                        'Jul 2017',
                        'Aug 2017',
                        'Sep 2017',
                        'Oct 2017',
                        'Nov 2017',
                        'Dec 2017'
                      ].map((month, i) => ({
                        'month': month,
                        'paid': `Rp ${faker.random.number( { min: 5, max: 9 } ) * 100}.000`,
                        'periodStart': `${faker.random.arrayElement(['Jul', 'Aug', 'Sep'])} 2017`,
                        'periodEnd': `${faker.random.arrayElement(['Jul', 'Aug', 'Sep'])} 2017`
                      }))
                    })()
        }));
      };

      const fakeTuition = generateFakeTuition();
    </script>

    
    <script>
      $(function () {
        
        // Lodash template custom delimiter
        _.templateSettings = {
            interpolate: /\<\@\=(.+?)\@\>/g,
            evaluate: /\<\@(.+?)\@\>/g
        };

        // Global datepicker options
        var datepickerOptions = {
          language: 'en',
          view: 'months',
          minView: 'months',
          dateFormat: 'MM yyyy'
        };

        // Initiate all tooltip elements
        $('[data-toggle="tooltip"]').tooltip();

        // Cache Tuition table
        var $tuitionTable = $('#js_cms_tuition_table');

        // Row Action generator
        function appendRowAction(elRow) {
          var $elTrigger = elRow.find('.js-cms-tuition-col-name')
          var templateFn = _.template($('#js_tuition_row_action_template').html());
          var templateHTML = templateFn({
            index: $elTrigger.attr('data-row-index'),
            name: $elTrigger.attr('data-record-name'),
            email: $elTrigger.attr('data-record-email'),
            phone: $elTrigger.attr('data-record-phone')
          });

          elRow.after(templateHTML);
          $elTrigger
            .attr('data-toggle', 'collapse')
            .collapse();
        }

        // Row generator
        function generateTuitionRow(index, record, columns, cellWriter) {

          function generateCell( templateIn, index, record ) {
            var templateFn = _.template(templateIn.html());
            var templateOut = templateFn({index: index, record: record});
            return templateOut;
          }

          return '<tr>' +
            generateCell( $('#js_tuition_cell_id_template'), index, record ) +
            generateCell( $('#js_tuition_cell_name_template'), index, record ) +
            generateCell( $('#js_tuition_cell_payments_template'), index, record ) +
            '</tr>';
        }

        // Filter Popover generator
        function generateFilterPopover() {
          var $elTrigger = $('#js_cms_tuition_filter_trigger')
          ,   $elForm = $elTrigger.closest('form');

          $elTrigger.on('inserted.bs.popover', function(e) {
            $elForm.find('.popover')
              .addClass('mx-0')
              .css('width', '16rem');
            
            $('.selectpicker').selectpicker('show');

            $('.selectpicker').each(function(i) {
              var selector = $(this).attr('id');
              $(this).selectpicker('val',  $('#' + selector + '_hidden').val() || '' );
            });
            $('.js-filter-datepicker').each(function(i) {
              var selector = $(this).attr('id');
              $(this).val( $('#' + selector + '_hidden').val() || '' );
            });

            function handleDatepickerOnSelect( format, date, inst ) {
              var _dateFormat = {  
                  weekday: 'long',
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                };
              var _localeDates = date.toLocaleString('en-us', _dateFormat).split(',');
              var _value = _localeDates[1].replace(/[^a-z]/gi, '') + ' ' + _localeDates[2].replace(/[^0-9]/g, ''); // April 2017
              $('#' + inst.$el.attr('id') + '_hidden').val( _value );
            }

            var _datepickerExtensions = {
              position: 'right center',
              view: 'months',
              minView: 'months',
              onSelect: handleDatepickerOnSelect
            }

            $('.js-filter-datepicker').datepicker( _.extend( datepickerOptions, _datepickerExtensions ) );
          });

          $elTrigger.on('hide.bs.popover', function(e) {
            $('.js-filter-datepicker').each(function(i) {
              var $elDp = $(this)
              ,   $dpData = $elDp.datepicker().data('datepicker').$datepicker;
              if (typeof $dpData === 'object') $dpData.remove();
            });
          });

          function populateHiddenFilter( selectors ) {
            _.forEach( selectors, function( selector ) {
              if ( !$(selector).hasClass('js-filter-datepicker') ) {
                $(document).on('change', selector, function(e) {
                  $(selector + '_hidden').val( $(selector).val() );
                });
              }
            });
          }

          populateHiddenFilter( ['#js_cms_tuition_filter_grade', '#js_cms_tuition_filter_class', '#js_cms_tuition_filter_status'] );

          $elTrigger.popover({
            title: '',
            content: $('#js_cms_tuition_filter_popover').html(),
            html: true,
            placement: 'bottom',
            container: '#js_cms_tuition_form'
          });
        }

        generateFilterPopover();

        // New Tuition Modal
        function initNewTuitionModal() {

          function initNameField() {
            function substringMatcher(strs) {
              return function findMatches(q, cb) {
                var matches, substringRegex;

                // an array that will be populated with substring matches
                matches = [];

                // regex used to determine if a string contains the substring `q`
                substrRegex = new RegExp(q, 'i');

                // iterate through the pool of strings and for any string that
                // contains the substring `q`, add it to the `matches` array
                _.each(strs, function(v, k) {
                  if (substrRegex.test(v)) matches.push(v);
                });

                cb(matches);
              };
            };

            var _namesPool = ['Albert Camus', 'Franz Kafka', 'George Orwell'];

            $('#js_tuition_new_name.typeahead').typeahead(
              {
                hint: true,
                highlight: true,
                minLength: 1
              },
              {
                name: 'names',
                source: substringMatcher( _namesPool )
              }
            );
          }

          function initDatepickers( el ) {

            function handleDatepickerOnSelect( format, date, inst ) {
              var _dateFormat = {  
                  weekday: 'long',
                  year: 'numeric',
                  month: 'long',
                  day: 'numeric',
                  hour: '2-digit',
                  minute: '2-digit'
                };
              var _localeDates = date.toLocaleString('en-us', _dateFormat).split(',');
              var _value = _localeDates[1].replace(/[^a-z]/gi, '') + ' ' + _localeDates[2].replace(/[^0-9]/g, ''); // April 2017
              $('#' + inst.$el.attr('id') + '_hidden').val( _value );
            }

            var _datepickerExtensions = {
              position: 'right center',
              view: 'months',
              minView: 'months',
              onSelect: handleDatepickerOnSelect
            }

            el.datepicker( _.extend( datepickerOptions, _datepickerExtensions ) );
          }

          initNameField();
          initDatepickers( $('#js_tuition_new_paid_for') );
          initDatepickers( $('#js_tuition_new_paid_at') );
        }

        initNewTuitionModal();

        // Init datepicker for Period Control
        function initPeriodControl() {
          $('#js_tuition_period_control').datepicker({
            language: 'en',
            position: 'bottom center',
            dateFormat: 'd M yyyy',
            range: true,
            multipleDatesSeparator: ' ' + String.fromCharCode(0x2014) + ' '
          });
        }

        initPeriodControl();

        // Dynatable event handler
        $tuitionTable.bind('dynatable:afterUpdate', function(e, dynatable) {
          var $table = $(this);
          $table.find('tbody').find('tr').each(function(i) {
            var $row = $(this)
            ,   $elTrigger = $row.find('.js-cms-tuition-col-name')
            ,   $elCell = $elTrigger.closest('td');
            
            $elTrigger.on('click', function(e) {
              $elCell.toggleClass('bg-light');
            });

            $('.js-tuition-payment-text').tooltip();

            appendRowAction($row);
          });
        });

        // Dynateble initiator
        $tuitionTable.dynatable({
          features: {
            paginate: false,
            sort: false,
            pushState: false,
            search: false,
            recordCount: false,
            perPageSelect: false
          },
          dataset: {
            records: fakeTuition
          },
          writers: {
            _rowWriter: generateTuitionRow
          }
        });
      });
    </script>

    <script src="../copy/page/sidenav.js"></script>
    <script src="../copy/vendor/Chart.min.js"></script>
    <script src="../copy/sample/chart/test-tuition.js"></script>
    <script src="../copy/page/dashboard/message.js"></script>
  </body>
</html>